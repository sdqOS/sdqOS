<!DOCTYPE html>
<html lang="cn">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Text</title>
    <!-- 导入网络js -->
    <link rel="stylesheet" href="/bulma.min.css">

    <!-- 导入css -->
    <link rel="stylesheet" href="/style.css"/>
  
  <meta name="generator" content="Hexo 5.4.2"></head>
  <body>

  <div id="page-container">
    <span class="pai">
    <a class="kong" href="/"> 主页 </a>
    <a class="kong" href="/archives"> 分类 </a>
    <a class="kong" href="/about"> 关于 </a>
</span>

    <div id="content-wrap">
        <div class="container">
          <!-- 点击文章 -->
<div class="wenzhang-container">
  <h1 class="title is-3 is-4-mobile">爬虫 请求头和响应头(吃牢饭集合)</h1>
  <wenzhang>
      <div class="contents">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-text">请求头</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-text">重定向</span></a></li></ol>
      </div>
      <p><strong>每天一个入狱小技巧</strong></p>
<span id="more"></span>

<h1 id="请求头"><a href="#请求头" class="headerlink" title="请求头"></a>请求头</h1><h1 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h1><p><strong>301是永久重定向, 之后的请求中客户端应该使用新的URI(即, 可以被浏览器缓存), 对于POST/PUT/DELETE请求 客户端不应该自动的重定向</strong></p>
<p><strong>302是由于未知原因重定向, 之后的请求中客户端不应该用新的URI, 对于POST/PUT/DELETE请求 客户端不应该自动重定向</strong></p>
<p><strong>303是由于未知原因重定向, 之后的请求中客户端不应该用新的URI, 对于POST/PUT/DELETE请求 客户端应该使用GET请求来替代</strong></p>
<p><strong>307是临时重定向, 之后资源可能会回到这个位置, 之后的请求中客户端应该使用旧的URI, 对于POST/PUT/DELETE请求 客户端不应该自动重定向</strong></p>
<br>

<!-- # 查看报文

**点击Request Headers旁边的view parsed**

**注意: view parsed没点之前其实是给你优化过的**

# 报文格式

GET|HTTP|1.1|Host|
-|-|-|-|
方法 | 路径 | 协议版本 |发送请求的域名

<ul>
<li>Content-Type</li>
<li>Host (主机和端口号)</li>
<li>Connection (链接类型/常链接)</li>
<li>UPgrade-Insecure-Requests (升级为HTTPS请求)</li>
<li>User-Agent (用户代理 提供系统信息和浏览器信息)</li>
<li>Referer (页面跳转处)</li>
<li>Cookie (Cookie数据非常重要,)</li>
<li>Authorization (表示HTTP协议中需要认证资源的认证信息, 例如用于jwt认证)</li>
</ul>

**请求头表格形式**

 特别关注|以下几个请求头|| |
-|-|-|-|
Host | 域名 |  |
Connection | 常链接 |  |
UPgrade-Insecure-Requests | 升级为HTTPS请求 |  |
User-Agent | 用户代理|  |
Refrer | 页面跳转处, 防盗链 |  |
Cookie | 保持状态, 用于跳过账号密码 |  |

**响应头表格形式**

 特别关注|以下几个请求头|| |
-|-|-|-|
HTTP/1.1 | 协议 |  |
200 | 状态码 |  |
Set-Cookie | cookie到用户浏览器的缓存非常重要用于跳过账号密码 |  |

# 状态码

**常见的状态码 (了解就行)**

<ul>
<li>200: 成功</li>
<li>302: 跳转, 新的url在响应的Location头中给出</li>
<li>303: 浏览器对于POST的响应进行重新定向至新的url</li>
<li>307: 浏览器对应GET响应进行重新定向至新的url</li>
<li>403: 资源不可用; 服务器理解客户的请求, 但拒绝处理它(没有权限)</li>
<li>404: 找不到资源</li>
<li>500: 服务器内部错误</li>
<li>503: 服务器又有维护或者负载过重未能应答, 在响应中可能会携带Retry-After响应头; 有可能是因为爬虫频繁访问url, 使得服务器忽视爬虫的请求, 最终返回503响应状态码</li>
</ul>

**常见状态码表格形式 (了解就行)**

 状态码|代表意思|| |
-|-|-|-|
200 | 成功 |  |
302 | 跳转, 新的url在响应的Location头中给出 |  |
303 | 浏览器对于POST的响应进行重新定向至新的url |  |
307 | 浏览器对应GET响应进行重新定向至新的url |  |
403 | 资源不可用; 服务器理解客户的请求, 但拒绝处理它(没有权限) |  |
404 | 找不到资源 |  |
500 | 服务器内部错误 |  |
503 | 服务器又有维护或者负载过重未能应答, 在响应中可能会携带Retry-After响应头; 有可能是因为爬虫频繁访问url, 使得服务器忽视爬虫的请求, 最终返回503响应状态码 |  |

**总结 所有的状态码都不可信, 一切以是否从抓包得到的响应中获得到的数据为准 network中抓包得到的源码才是判断依据, elements中的源码是渲染之后的源码**

 请求过程||
-|-|
 浏览器| 发送所有请求, 进行渲染 |  
  爬虫| 发送所有请求, 不会渲染 |  


 请页面可分为||
-|-|
骨骼文件| html静态文件 |  
肌肉文件| js/ajax请求 | 
皮肤文件| css/font/图片等 |  

**抓包过程: 根据发送请求的流程分别在 骨骼 / 肌肉 / 皮肤 响应中查找数据**


 -->

      <p class="copyright"><strong>Links: <a href="https://sdq3.gitee.io/reptile-header.html">https://sdq3.gitee.io/reptile-header.html</a></strong></p>
  </wenzhang>
</div>
        </div>
    </div>
    
<footer id="footer" >
    <span class="konga">
        <a class="jiao"  href="."><</a>
        <a class="jiao"  href=".">></a>
    </span>
</footer>
  </div>
  </body>
</html>
