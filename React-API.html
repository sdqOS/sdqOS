<!DOCTYPE html>
<html lang="cn">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Text</title>
    <!-- 导入css -->
    <link rel="icon" href="/text.png">
    <link rel="stylesheet" href="/style.css"/>
  <meta name="generator" content="Hexo 5.4.2"></head>
  <body>

  <div id="page-container">
    <span class="pai">
    <a class="kong" href="/"> 主页 </a>
    <a class="kong" href="/archives"> 分类 </a>
    <a class="kong" href="/about"> 关于 </a>
</span>

    <div id="content-wrap">
        <div class="container">
          <!-- 点击文章 -->
<div>
  <h1>React 组件 API</h1>
  <wenzhang>
      <div class="contents">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#React-%E7%BB%84%E4%BB%B6"><span class="toc-text">React 组件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9B%BF%E6%8D%A2%E7%8A%B6%E6%80%81-replaceState"><span class="toc-text">替换状态: replaceState</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%B1%9E%E6%80%A7-setProps"><span class="toc-text">设置属性: setProps</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9B%BF%E6%8D%A2%E5%B1%9E%E6%80%A7-replaceProps"><span class="toc-text">替换属性: replaceProps</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%BA%E5%88%B6%E6%9B%B4%E6%96%B0-forceUpdate"><span class="toc-text">强制更新: forceUpdate</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96DOM%E8%8A%82%E7%82%B9-findDOMNode"><span class="toc-text">获取DOM节点: findDOMNode</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E7%BB%84%E4%BB%B6%E6%8C%82%E8%BD%BD%E7%8A%B6%E6%80%81-isMounted"><span class="toc-text">判断组件挂载状态: isMounted</span></a></li></ol>
      </div>
      <p><strong>React笔记</strong></p>
<span id="more"></span>

<h1 id="React-组件"><a href="#React-组件" class="headerlink" title="React 组件"></a>React 组件</h1><ul>
<li><p>设置状态: setState</p>
</li>
<li><p>替换状态: replaceState</p>
</li>
<li><p>设置属性: setProps</p>
</li>
<li><p>替换属性: replaceProps</p>
</li>
<li><p>强制更新: forceUpdate</p>
</li>
<li><p>获取DOM节点: findDOMNode</p>
</li>
<li><p>判断组件挂载状态: isMounted</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript">&#123;<span class="hljs-comment">/*  nextState将要设置的新状态, 该状态会和当前的state合并  */</span>&#125; <br><span class="hljs-title function_">setState</span>(<span class="hljs-params">object nextState[, <span class="hljs-keyword">function</span> callback]</span>)<br><br>&#123;<span class="hljs-comment">/*  callback可选参数, 回调函数 该函数会在setState设置成功, 且组件重新渲染后调用  */</span>&#125; <br><span class="hljs-title function_">setState</span>(object callback[, <span class="hljs-keyword">function</span> callback])<br></code></pre></td></tr></table></figure>

<p><strong>关于setState</strong></p>
<ul>
<li><p>不能在组件内部通过this.state修改状态, 因为该状态会在调用setState()后被替换 </p>
</li>
<li><p>setState()并不会立即改变this.state, 而是创建一个即将处理的state setState()并不一定是同步的, 为了提升性能React会批量执行state和DOM渲染 </p>
</li>
<li><p>setState()总是会触发一次组件重绘, 除非在shouldComponentUpdate()中实现了一些条件渲染逻辑</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs HTML"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;example&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNameIsStitch</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span>&#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;</span><br><span class="language-javascript">          <span class="hljs-variable language_">super</span>(props);</span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = &#123;<span class="hljs-attr">clickCount</span>: <span class="hljs-number">0</span>&#125;;</span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClick</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClick</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">      </span><br><span class="language-javascript">      <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">state</span>) &#123;</span><br><span class="language-javascript">          <span class="hljs-keyword">return</span> &#123;<span class="hljs-attr">clickCount</span>: state.<span class="hljs-property">clickCount</span> + <span class="hljs-number">1</span>&#125;;</span><br><span class="language-javascript">        &#125;);</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">      render () &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">return</span> (<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.handleClick&#125;</span>&gt;</span>点击 点击次数为: &#123;this.state.clickCount&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span>);</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(</span><br><span class="language-javascript">      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyNameIsStitch</span> /&gt;</span></span>,</span><br><span class="language-javascript">      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;example&#x27;</span>)</span><br><span class="language-javascript">    );</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><font  color=#DC143C>查看效果</font></p>
<iframe id="iframe" src="/html/setState.html"></iframe>

<h1 id="替换状态-replaceState"><a href="#替换状态-replaceState" class="headerlink" title="替换状态: replaceState"></a>替换状态: replaceState</h1><ul>
<li>replaceState()方法与setState()类似, 但是方法只会保留nextState中状态, 原state不在nextState中的状态都会被删除 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript">&#123;<span class="hljs-comment">/*  nextState, 将要设置的新状态, 该状态会替换当前的state  */</span>&#125; <br><span class="hljs-title function_">setProps</span>(object nextProps[, <span class="hljs-keyword">function</span> callback]<br><br>&#123;<span class="hljs-comment">/*  callback, 可选参数, 回调函数 该函数会在replaceState设置成功, 且组件重新渲染后调用  */</span>&#125; <br><span class="hljs-title function_">setProps</span>(object callback[, <span class="hljs-keyword">function</span> callback]<br></code></pre></td></tr></table></figure></li>
</ul>
<h1 id="设置属性-setProps"><a href="#设置属性-setProps" class="headerlink" title="设置属性: setProps"></a>设置属性: setProps</h1><ul>
<li>设置组件属性, 并重新渲染组件 </li>
<li>props相当于组件的数据流, 它总是会从父组件向下传递至所有的子组件中 当和一个外部的JavaScript应用集成时, 我们可能会需要向组件传递数据或通知React.render()组件需要重新渲染, 可以使用setProps() </li>
<li>更新组件, 我可以在节点上再次调用React.render(), 也可以通过setProps()方法改变组件属性, 触发组件重新渲染 </li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript">&#123;<span class="hljs-comment">/*  nextProps, 将要设置的新属性, 该状态会和当前的props合并  */</span>&#125; <br><span class="hljs-title function_">replaceProps</span>(<span class="hljs-params">object nextProps[, <span class="hljs-keyword">function</span> callback]</span>)<br><br>&#123;<span class="hljs-comment">/*  callback, 可选参数, 回调函数 该函数会在setrops设置成功, 且组件重新渲染后调用  */</span>&#125; <br><span class="hljs-title function_">replaceProps</span>(object allback[, <span class="hljs-keyword">function</span> callback])<br></code></pre></td></tr></table></figure>

<h1 id="替换属性-replaceProps"><a href="#替换属性-replaceProps" class="headerlink" title="替换属性: replaceProps"></a>替换属性: replaceProps</h1><ul>
<li>replaceProps()方法与setProps类似, 但它会删除原有 props</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript">&#123;<span class="hljs-comment">/*  nextProps, 将要设置的新属性, 该属性会替换当前的props  */</span>&#125; <br><span class="hljs-title function_">replaceProps</span>(<span class="hljs-params">object nextProps[, <span class="hljs-keyword">function</span> callback]</span>)<br><br>&#123;<span class="hljs-comment">/*  callback, 可选参数, 回调函数 该函数会在replaceProps设置成功, 且组件重新渲染后调用  */</span>&#125; <br><span class="hljs-title function_">replaceProps</span>(object allback[, <span class="hljs-keyword">function</span> callback])<br></code></pre></td></tr></table></figure>

<h1 id="强制更新-forceUpdate"><a href="#强制更新-forceUpdate" class="headerlink" title="强制更新: forceUpdate"></a>强制更新: forceUpdate</h1><ul>
<li>forceUpdate()方法会使组件调用自身的render()方法重新渲染组件, 组件的子组件也会调用自己的render()  但是, 组件重新渲染时, 依然会读取this.props和this.state, 如果状态没有改变, 那么React只会更新DOM  </li>
<li>forceUpdate()方法适用于this.props和this.state之外的组件重绘 (如: 修改了this.state后) , 通过该方法通知React需要调用render()</li>
<li>一般来说, 应该尽量避免使用forceUpdate(), 而仅从this.props和this.state中读取状态并由React触发render()调用</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript">&#123;<span class="hljs-comment">/*  callback, 可选参数, 回调函数 该函数会在组件render()方法调用后调用  */</span>&#125; <br><span class="hljs-title function_">forceUpdate</span>([<span class="hljs-keyword">function</span> callback])<br></code></pre></td></tr></table></figure>

<h1 id="获取DOM节点-findDOMNode"><a href="#获取DOM节点-findDOMNode" class="headerlink" title="获取DOM节点: findDOMNode"></a>获取DOM节点: findDOMNode</h1><ul>
<li>如果组件已经挂载到DOM中, 该方法返回对应的本地浏览器 DOM 元素 当render返回null 或 false时, this.findDOMNode()也会返回null 从DOM 中读取值的时候, 该方法很有用, 如：获取表单字段的值和做一些 DOM 操作<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript">&#123;<span class="hljs-comment">/*  返回值: DOM元素DOMElement  */</span>&#125; <br><span class="hljs-title class_">DOMElement</span> <span class="hljs-title function_">findDOMNode</span>()<br></code></pre></td></tr></table></figure></li>
</ul>
<h1 id="判断组件挂载状态-isMounted"><a href="#判断组件挂载状态-isMounted" class="headerlink" title="判断组件挂载状态: isMounted"></a>判断组件挂载状态: isMounted</h1><ul>
<li>isMounted()方法用于判断组件是否已挂载到DOM中 可以使用该方法保证了setState()和forceUpdate()在异步场景下的调用不会出错</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript">&#123;<span class="hljs-comment">/*  返回值: true或false, 表示组件是否已挂载到DOM中  */</span>&#125; <br>bool <span class="hljs-title function_">isMounted</span>()<br></code></pre></td></tr></table></figure>

<br>
      <div id="lv-container" data-id="city" data-uid="MTAyMC80NTk3NS8yMjQ4Ng==">
  <!-- 评论系统 -->
  <script type="text/javascript">
     (function(d, s) {
         var j, e = d.getElementsByTagName(s)[0];
         if (typeof LivereTower === 'function') { return; }
  
         j = d.createElement(s);
         j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
         j.async = true;
  
         e.parentNode.insertBefore(j, e);
     })(document, 'script');
  </script>


  </wenzhang>






        </div>
    </div>
    
<footer id="footer" >
    <span class="konga">
        <a class="jiao"  href="."><</a>
            <input type="text" id="text_input"  placeholder="搜索" >
            
        <a class="jiao"  href=".">></a>
    </span>
    <div id="text_output"></div>
    </div>

</footer>

<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<bokebangquan>
<!-- 博客版权 -->
<p><strong>
  作者: 我叫史迪奇
  <br>
  本文来自于: 
   <a href="https://sdq3.link/React-API.html">https://sdq3.link/React-API.html</a>博客内容遵循 署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</strong></p>

</bokebangqua>


  </div>
  
<script src="/jquery.min.js"></script>

  
<script src="/main.js"></script>

  </body>
</html>
